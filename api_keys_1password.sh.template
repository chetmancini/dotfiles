# 1Password-backed API keys
# Copy this to api_keys_1password.sh and customize
#
# Prerequisites:
#   1. Install 1Password CLI: brew install --cask 1password-cli
#   2. Enable CLI integration in 1Password app:
#      Settings > Developer > "Integrate with 1Password CLI"
#   3. Create items in your vault with fields matching below
#
# Usage:
#   op_secret "vault/item/field" exports the value to the variable name
#   The function handles authentication and caches the session
#
# To add a new secret:
#   1. Store it in 1Password (any vault)
#   2. Add a line: export VAR_NAME=$(op_secret "Vault/Item/field")
#
# Vault structure recommendation:
#   Create a "API Keys" vault or use "Private"
#   Item name = service name (e.g., "OpenAI")
#   Field name = "credential" or "api_key"

# Helper function to fetch secrets from 1Password
# Returns empty string if op isn't available or not signed in
op_secret() {
    local ref="op://$1"
    if command -v op &>/dev/null && op whoami &>/dev/null 2>&1; then
        op read "$ref" 2>/dev/null
    fi
}

# Example secrets - uncomment and customize vault/item paths:
# export OPENAI_API_KEY=$(op_secret "Private/OpenAI/credential")
# export ANTHROPIC_API_KEY=$(op_secret "Private/Anthropic/credential")
# export GITHUB_TOKEN=$(op_secret "Private/GitHub/token")
# export LANGCHAIN_API_KEY=$(op_secret "Private/LangChain/credential")
# export TAVILY_API_KEY=$(op_secret "Private/Tavily/credential")

# You can also use the "API Credential" template in 1Password:
# export AWS_ACCESS_KEY_ID=$(op_secret "Private/AWS/username")
# export AWS_SECRET_ACCESS_KEY=$(op_secret "Private/AWS/credential")
